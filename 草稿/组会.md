# ç›®å½•
1. å·¥ä½œä»»åŠ¡
2. å­¦ä¹ è¿‡ç¨‹
3. æœ€åç»“æœ

# å·¥ä½œä»»åŠ¡
- ä»PIDæ§åˆ¶å¼€å§‹
- å­¦ä¹ LQRæ§åˆ¶ã€SDREæ§åˆ¶ã€CWæ–¹ç¨‹
- æœ€ç»ˆè¦å®Œæˆå‚æ•°è‡ªé€‚åº”çš„æ§åˆ¶ç³»ç»Ÿ

# LQR æ§åˆ¶
$$
\begin{cases}
m\boldsymbol{\ddot {r}}^{(A)}=m{\mathop {r} \limits^{ \circ \circ }}^{(A)}+{2m\omega}\times{\boldsymbol{\mathop r \limits^ \circ}}^{(A)} +m{\boldsymbol{\omega}}\times \left( { \boldsymbol{\omega}}\times{\boldsymbol{r}}^{(A)} \right)+m\boldsymbol{\mathop \omega \limits^ \circ}\times {\boldsymbol{r}^{(A)}}=\boldsymbol{f_{c}}+\dfrac{m\mu g}{|\boldsymbol{r}|^{3}}\boldsymbol{r_{B}^{(A)}}A^{(A)} \\
J\boldsymbol{\dot{\omega}}+\boldsymbol{\omega}\times(J\cdot \boldsymbol{\omega})=\boldsymbol{M}
\end{cases}
$$
å¦‚æœå¯ä»¥å°†æ–¹ç¨‹çº¿æ€§åŒ–ï¼Œè®¾çº¿æ€§åŒ–ç»“æœä¸ºï¼š
$$
\boldsymbol{\ddot{x}}=\begin{pmatrix}
\boldsymbol{\dot{r}} \\
\boldsymbol{\ddot{r}} \\
\boldsymbol{\omega} \\
\boldsymbol{\dot{\omega}}
\end{pmatrix}=A\begin{pmatrix}
\boldsymbol{r} \\
\boldsymbol{\dot{r}} \\
\boldsymbol{\theta} \\
\boldsymbol{\dot{\theta}}
\end{pmatrix}+B\boldsymbol{u}
$$
å…ˆè€ƒè™‘çº¿æ€§æ§åˆ¶å™¨ï¼Œä»¤$\boldsymbol{u}=-k\boldsymbol{x}$
å½“$A-Bk$è´Ÿå®šï¼Œåˆ™æ§åˆ¶ç³»ç»Ÿç¨³å®š
$$
J=\int _{0}^{\infty}\boldsymbol{x^{T}}Qx+\boldsymbol{u^T}Ru  \, dx 
$$
é€šè¿‡matlab lqrå‡½æ•°æ±‚è§£æ–¹ç¨‹å¯ä»¥å¾—åˆ°æ§åˆ¶ç³»æ•°
æ‰€ä»¥æœ€åçš„é—®é¢˜å°†æ§åˆ¶æ–¹ç¨‹çº¿æ€§åŒ–

# SDRE æ§åˆ¶
ä¸LQRç±»ä¼¼
è€ƒè™‘è‡ªæ²»çš„ä»¿å°„éçº¿æ€§ç³»ç»Ÿ$\boldsymbol{\dot{x}}=f(\boldsymbol{x})+B(\boldsymbol{x})\boldsymbol{u}$
$$
J=\int _{0}^{\infty}\boldsymbol{x^{T}}Q(\boldsymbol{x})x+\boldsymbol{u^T}R(\boldsymbol{x})u  \, dt 
$$
å…¶ä¸­$Q(\boldsymbol{x})$åŠæ­£å®šï¼Œ$R(\boldsymbol{x})$æ­£å®š
æ±‚è§£å¯ä»¥è½¬åŒ–ä¸ºæ±‚è§£HJBæ–¹ç¨‹
$$
\dfrac{ \partial V }{ \partial \boldsymbol{x} }f(\boldsymbol{x})-\dfrac{1}{2}\dfrac{ \partial V^{T} }{ \partial \boldsymbol{x} } B(x)R^{-1}B(x)^{T}\dfrac{ \partial v }{ \partial \boldsymbol{x} }+\dfrac{1}{2}\boldsymbol{x^{T}}Q\boldsymbol{x}=0  
$$
å…¶ä¸­
$$
V(\boldsymbol{x})=min_{u}\int _{0}^{\infty}\boldsymbol{x^{T}}Q(\boldsymbol{x})\boldsymbol{x}+\boldsymbol{u^{T}}R(\boldsymbol{x})u \, dt 
$$
æœ€åé€šè¿‡matlabä¸­å‡½æ•°æ±‚è§£å¾—åˆ°æ§åˆ¶å‚æ•°
åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œå›°éš¾æ˜¯å¯¹$Q(\boldsymbol{x}),R(\boldsymbol{x})$çš„æ±‚è§£

# CWæ–¹ç¨‹ï¼ˆç±»ä¼¼æ¨å¯¼ï¼‰
CWæ–¹ç¨‹åªè€ƒè™‘å«æ˜Ÿçš„ä½ç½®
ä¸ºäº†èƒ½å¤Ÿè€ƒè™‘å«æ˜Ÿçš„å§¿æ€ï¼Œåšç±»ä¼¼æ¨å¯¼
è€ƒè™‘$\boldsymbol{\omega} = (\omega_{x}\quad\omega_{y}\quad\omega_{z})$ï¼Œå¾—åˆ°
$$\boldsymbol{{\overset{{Â¨}}{\boldsymbol{r}}}_{\boldsymbol{2}}} - \boldsymbol{{\overset{{Â¨}}{\boldsymbol{r}}}_{\boldsymbol{1}}} = \mu r_{1}^{- 3}\left( 3\frac{xx_{1} + yy_{1} + zz_{1}}{x_{1}^{2} + y_{1}^{2} + z_{1}^{2}}\left( \begin{array}{r}
x_{1} \\
y_{1} \\
z_{1}
\end{array} \right) \right) + \frac{3xx_{1} + 3yy_{1} + 3zz_{1} - x_{1}^{2} - y_{1}^{2} - z_{1}^{2}}{x_{1}^{2} + y_{1}^{2} + z_{1}^{2}}\left( \begin{array}{r}
x \\
y \\
z
\end{array} \right) + \boldsymbol{f}$$
å…¶ä¸­ï¼Œ$x,y,z$ çš„é‡çº§å°äº $x_{1},y_{1},z_{1}$ çš„é‡çº§
å¦ä¸€æ–¹é¢ï¼Œç”±ç»å¯¹å¯¼æ•°å¯ä»¥å¾—åˆ°ï¼š
$$\overset{\boldsymbol{Â¨}}{\boldsymbol{\rho}} = \overset{\circ \circ}{\rho} + 2\omega \times \overset{\boldsymbol{\circ}}{\boldsymbol{\rho}} + \boldsymbol{\omega} \times \left( \boldsymbol{\omega} \times \boldsymbol{\rho} \right) + \overset{\boldsymbol{\circ}}{\boldsymbol{\omega}} \times \boldsymbol{\rho} = \left( \begin{array}{r}
\overset{Â¨}{x} + \overset{Ë™}{z}\omega_{y} - \overset{Ë™}{y}\omega_{z} + z{\overset{Ë™}{\omega}}_{y} - y{\overset{Ë™}{\omega}}_{z} + y\omega_{x}\omega_{y} - x\omega_{y}^{2} - x\omega_{z}^{2} + z\omega_{x}\omega_{y} \\
\overset{Â¨}{y} + \overset{Ë™}{x}\omega_{z} - \overset{Ë™}{z}\omega_{x} + x{\overset{Ë™}{\omega}}_{z} - z{\overset{Ë™}{\omega}}_{x} + z\omega_{y}\omega_{z} - y\omega_{z}^{2} - y\omega_{x}^{2} + x\omega_{x}\omega_{y} \\
\overset{Â¨}{z} + \overset{Ë™}{y}\omega_{x} - \overset{Ë™}{x}\omega_{y} + y{\overset{Ë™}{\omega}}_{x} - x{\overset{Ë™}{\omega}}_{y} + x\omega_{x}\omega_{z} - z\omega_{x}^{2} - z\omega_{y}^{2} + y\omega_{y}\omega_{z}
\end{array} \right)$$
ç»“åˆå§¿æ€çš„æ–¹ç¨‹ï¼š
$$\begin{cases}
{\overset{Ë™}{\omega}}_{x} = - \frac{\omega_{y}\omega_{z}J_{zz}}{J_{yy}} + \frac{\omega_{y}\omega_{z}J_{yy}}{J_{zz}} - \frac{\tau_{x}}{J_{xx}} \\
{\overset{Ë™}{\omega}}_{y} = - \frac{\omega_{x}\omega_{z}J_{xx}}{J_{zz}} + \frac{\omega_{x}\omega_{z}J_{zz}}{J_{yy}} - \frac{\tau_{x}}{J_{yy}} \\
{\overset{Ë™}{\omega}}_{z} = - \frac{\omega_{x}\omega_{y}J_{yy}}{J_{xx}} + \frac{\omega_{x}\omega_{y}J_{xx}}{J_{yy}} - \frac{\tau_{z}}{J_{zz}}
\end{cases}$$
å¯¹äºè¿™ä¸€è¿‡ç¨‹ï¼š
1. è§’é€Ÿåº¦æ˜¯ä¼ªé€Ÿåº¦ï¼Œå¯¹è§’é€Ÿåº¦çš„æ‹†åˆ†æ˜¯å¦åˆç†
2. åœ¨æ¨å¯¼CWæ–¹ç¨‹æ—¶ï¼Œä¸ºäº†å¾—åˆ°ä¸€ä¸ªæ›´å®¹æ˜“å¤„ç†çš„é‡ï¼Œå°†ä¸€é˜¶å°é‡çœç•¥ï¼Œå¾—åˆ°æ ‡å‡†çš„CWæ–¹ç¨‹ç»“æœï¼Œæ˜¯å¦ä¼šäº§ç”Ÿè¾ƒå¤§è¯¯å·®
3. å¾—åˆ°çš„6ä¸ªæ–¹ç¨‹æ˜¯åˆ†å¼çš„å½¢å¼ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•å†™æˆçŸ©é˜µçš„å½¢å¼ï¼Œæœ¬æ¥æ˜¯å¸Œæœ›å¯ä»¥å†™æˆçŸ©é˜µç­‰å¼ï¼Œç„¶åå˜ä¸ºHJBæ–¹ç¨‹ï¼Œç„¶åæ±‚è§£ï¼Œæ‰€ä»¥è¿™å˜å¾—æœ‰äº›å›°éš¾

# LQRå®ç°
ä½ç½®é‡‡ç”¨CWæ–¹ç¨‹ï¼š
$$
\left\{ {\begin{array} 
{*{20}{l}}{ {\ddot x}}+{2 \omega }{\dot y} =  f_x\\
{ {\ddot y}}-{2 \omega }{\dot x} -{3\omega^{2}}{y}=  f_y\\
{ {\ddot z}}+{\omega^{2}}{z} =  f_z \\
\end{array}} \right.
$$
å§¿æ€ï¼š
$$
J\boldsymbol{\dot{\omega}}+\boldsymbol{\omega}\times(J\cdot \boldsymbol{\omega})=\boldsymbol{M}
$$
ç•¥å»$\omega$çš„äºŒé˜¶é‡å¾—ï¼š$J\boldsymbol{\dot{\omega}}=\boldsymbol{M}$

- [ ] task starting with a hyphenğŸ“… 